CREATE DATABASE HEROKU_D1794267a09323C
USE HEROKU_D1794267a09323C;


CREATE TABLE INTENT_RESPONSE (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    INTENTTYPE INT,
    INTENT NVARCHAR(255), 
    RESPONSE NVARCHAR(255)
);


#1-> loại không trả về gì hết, 
#2-> search kết quả trên trang của trường
#2-> search kết quả google

#4-> searh từ cơ sở dữ liệu
#5-> thực hiện hành 

INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(1, 'chao_hoi', null);
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(1, 'tam_biet', null);
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(1, 'unknown', null);

INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(2, 'thoi_khoa_bieu', null);
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(2, 'lich_thi', null);
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(2, 'ket_qua_thi', null);
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(2, 'hoc_bong', null);
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(2, 'quy_che_lam_luan_van', null);
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(2, 'tot_nghiep', null);

INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(3, 'bai_tap', null);
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(3, 'tai_lieu_mon_hoc', null);

INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(4, 'noi_dung_mon_hoc', 'select mh.noidungmonhoc from monhoc as mh where mh.tenmonhoc like ten_mon_hoc');
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(4, 'mon_hoc_truoc', 'select mh.tenmonhoc from monhoc as mh where mh.id in (select distinct mht.monhoctruoc from monhoc as mh1, monhoctruoc as mht where mh1.id = mht.monhoc and mh1.tenmonhoc like ten_mon_hoc)');
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(4, 'mon_hoc_thay_the', 'select mh.tenmonhoc from monhoc as mh where mh.id in (select distinct mht.monhocthaythe from monhoc as mh1, monhocthaythe as mht where mh1.id = mht.monhoc and mh1.tenmonhoc like ten_mon_hoc)');
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(4, 'so_luong_mon_hoc_chuyen_nganh', 'select mh.tenmonhoc from monhoc as mh, chuyennganh as cn, chuyennganh_monhoc as cnmh where cnmh.chuyennganh = cn.id and cnmh.monhoc = mh.id and cn.tenchuyennganh like ten_chuyen_nganh and cnmh.hinhthucmonhoc = hinh_thuc_mon_hoc');
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(4, 'so_luong_chuyen_nganh', 'select cn.tenchuyennganh from nganh as n,chuyennganh as cn where n.id = cn.nganh and n.tennganh like ten_nganh');
INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(4, 'diem_so', 'select mh.tenmonhoc, ds.diem from diemso as ds, monhoc as mh where ds.monhoc = mh.id and ds.sinhvien like ma_so_sinh_vien and mh.tenmonhoc like ten_mon_hoc');

INSERT INTO INTENT_RESPONSE(INTENTTYPE, INTENT, RESPONSE) VALUES(5, 'dang_ki_mon_hoc', 'CALL dangKiMonHoc(ma_so_sinh_vien,ten_mon_hoc, @ok, @result)');
#-------------------------------------------------------------------------------------------------------


CREATE TABLE NGANH (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    TENNGANH NVARCHAR(255)
);

INSERT INTO NGANH(ID, TENNGANH) VALUES (1, N'Công nghệ thông tin');
INSERT INTO NGANH(ID, TENNGANH) VALUES (2, N'Toán');
INSERT INTO NGANH(ID, TENNGANH) VALUES (3, N'Vật lí');
INSERT INTO NGANH(ID, TENNGANH) VALUES (4, N'Hóa');
INSERT INTO NGANH(ID, TENNGANH) VALUES (5, N'Sinh');
INSERT INTO NGANH(ID, TENNGANH) VALUES (6, N'Địa chất');
INSERT INTO NGANH(ID, TENNGANH) VALUES (7, N'Công nghệ sinh học');
INSERT INTO NGANH(ID, TENNGANH) VALUES (8, N'Khoa học vật liệu');
INSERT INTO NGANH(ID, TENNGANH) VALUES (9, N'Điện tử viễn thông');
INSERT INTO NGANH(ID, TENNGANH) VALUES (10, N'Công nghệ môi trường');


CREATE TABLE CHUYENNGANH(
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    NGANH INT, 
    TENCHUYENNGANH NVARCHAR(255)
);

INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (1, 1, N'Công nghệ phần mềm');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (2, 1, N'Hệ thống thông tin');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (3, 1, N'Thị giác máy tính và robot');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (4, 1, N'Mạng máy tính');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (5, 1, N'Khoa học máy tính');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (6, 1, N'Công nghệ tri thức');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (7, 2, N'Cơ học');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (8, 2, N'Đại số');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (9, 2, N'Giải tích');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (10, 2, N'Tối ưu và Hệ thống');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (11, 2, N'Ứng dụng tin học');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (12, 2, N'Xác suất - Thống kê');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (13, 2, N'Tài chính định lượng');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (14, 3, N'Vật lý Lý thuyết');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (15, 3, N'Vật lý Hạt nhân');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (16, 3, N'Vật lý Chất rắn');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (17, 3, N'Vật lý Ứng dụng');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (18, 3, N'Vật lý Điện tử');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (19, 3, N'Vật lý Tin học');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (20, 3, N'Vật lý Địa cầu');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (21, 3, N'Ngành Kỹ thuật Hạt nhân');
INSERT INTO CHUYENNGANH(ID, NGANH, TENCHUYENNGANH) VALUES (22, 3, N'Ngành Hải dương, Khí tượng và Thủy văn');


CREATE TABLE MONHOC (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    TENMONHOC NVARCHAR(255), 
    NOIDUNGMONHOC NVARCHAR(1000)
);

#cơ sở ngành
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (1, N'Cơ sở dữ liệu', 'Cung cấp các kiến thức về cơ sở dữ liệu như: khái niệm cơ bản về cơ sở dữ liệu quan hệ; Các phép toán đại số quan hệ; Ngôn ngữ SQL; Ngôn ngữ tân từ, Các ràng buộc toàn vẹn trên một sở dữ liệu; Quản trị bên trong cơ sở dữ liệu, môi trường khách/chủ.  ');
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (2, N'Cấu trúc dữ liệu và giải thuật', 'Giúp hiểu được cách lưu trữ, tổ chức dữ liệu có thứ tự, có hệ thống để dữ liệu có thể được sử dụng một cách hiệu quả');
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (3, N'Kiến trúc máy tính và hợp ngữ', 'Học phần cung cấp cho người học những kiến thức liên quan tới tổ chức logic của máy tính cũng như các thành phần phần cứng cơ bản');
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (4, N'Kỹ năng mềm', 'Cung cấp cho sinh viên các kĩ năng mềm phục cho môi trường làm việc ở đại học và thực tế : làm việc nhóm, lên kế hoạch,..');
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (5, N'Hệ điều hành', 'Mô tả cấu tạo của máy tính. Giải thích nguyên tắc hoạt động của máy tính và của các thành phần bên trong.');
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (6, N'Mạng máy tính', 'Tổng quan về công nghệ mạng máy tính và mạng cục bộ. Lịch sử mạng máy tính. Giới thiệu mạng máy tính. Định nghĩa mạng máy tính và mục đích của việc kết nối mạng. Nhu cầu của việc kết nối mạng máy tính. Định nghĩa mạng máy tính. Kỹ thuật chuyển mạch. Kiến trúc mạng.');

#mạng máy tính
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (7, N'Hệ điều hành nâng cao', null); 
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (8, N'Hệ thống viễn thông', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (9, N'Lập trình mạng', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (10, N'Mạng máy tính nâng cao', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (11, N'Thực tập mạng máy tính', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (12, N'An ninh mạng', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (13, N'An ninh mạng nâng cao', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (14, N'Thiết kế mạng', null);

#công nghệ phần mềm
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (15, N'Lập trình windows', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (16, N'Nhập môn công nghệ phần mềm', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (17, N'Kiểm chứng phần mềm', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (18, N'Phân tích và thiết kế phần mềm', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (19, N'Phân tích quản lí yêu cầu phần mềm', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (20, N'Quản lí dự án phần mềm', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (21, N'Phát triển game', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (22, N'Phát triển ứng dụng web', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (23, N'Phát triển phần mềm cho thiết bị di động', null);

INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (24, N'Kiến trúc phần mềm', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (25, N'Mẫu thiết kế hướng đối tượng và ứng dụng', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (26, N'Lập trình ứng dụng java', null);


#chung thị giác máy tính và robot và khoa học máy tính
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (27, N'Automata và ngôn ngữ hình thức', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (28, N'Các hệ cơ sở tri thức', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (29, N'Cơ sở trí tuệ nhân tạo', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (30, N'Đồ họa máy tính', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (31, N'Khai thác dữ liệu và ứng dụng', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (32, N'Máy học', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (33, N'Nhận dạng', null);

#khoa học máy tính
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (34, N'Nhập môn phân tích độ phức tạp thuật toán', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (35, N'Xử lí ảnh số và video số', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (36, N'Nhập môn thiết kế và phân tích giải thuật', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (37, N'Lập trình nhúng cơ bản', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (38, N'Khoa học về web', null);

#thị giác máy tính
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (49, N'Xử lí ảnh số và video số', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (50, N'Trình biên dịch', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (51, N'Phân tích thống kê dữ liệu nhiều biến', null);

# công nghệ tri thức
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (54, N'Bảo mật cơ sở dữ liệu', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (55, N'Mã hóa thông tin và ứng dụng', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (56, N'Nhập môn mã hóa mật mã', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (57, N'Nhập môn xử lí ngôn ngữ tự nhiên', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (58, N'Thống kê máy tính và ứng dụng', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (59, N'Xử lí ngôn ngữ tự nhiên nâng cao', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (60, N'Xử lí tín hiệu số', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (61, N'Máy học thống kê', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (62, N'An toàn và phục hồi dữ liệu', null);

#hệ thống thông tin
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (63, N'An toàn bảo mật dữ liệu trong hệ thống thông tin', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (64, N'Cơ sở dữ liệu nâng cao', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (65, N'Phân tích thiết kế hệ thống thông tin', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (66, N'Hệ quản trị cơ sở dữ liệu', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (67, N'Phát triển ứng dụng hệ thống thông tin hiện đại', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (68, N'Ứng dụng phân tán', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (69, N'Nhập môn quản trị kinh doanh', null);
INSERT INTO MONHOC(ID, TENMONHOC, NOIDUNGMONHOC) VALUES (70, N'Chuyên đề hệ quản trị cơ sở dữ liệu nâng cao', null);

CREATE TABLE DIEMSO (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    SINHVIEN INT, 
    MONHOC INT, 
    DIEM FLOAT
);

INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (1, '1412169', 1, 9 );
INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (2, '1412169', 2, 8 );
INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (3, '1412169', 3, 6.5 );
INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (4, '1412169', 4, 9.5 );
INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (5, '1412169', 5, 7.5 );
INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (6, '1412169', 6, 9.1 );
INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (7, '1412169', 7, 9.2 );
INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (8, '1412169', 8, 9.3 );
INSERT INTO DIEMSO(ID, SINHVIEN, MONHOC, DIEM) VALUES (9, '1412169', 9, 9.4 );

CREATE TABLE MONHOCTHAYTHE (
    MONHOC INT, 
    MONHOCTHAYTHE INT,
    PRIMARY KEY (MONHOC,MONHOCTHAYTHE)
);


CREATE TABLE MONHOCTRUOC (
    MONHOC INT, 
    MONHOCTRUOC INT,
    PRIMARY KEY (MONHOC,MONHOCTRUOC)
);

INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (1, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (5, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (5, 3);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (6, 3);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (7, 5);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (8, 6);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (9, 5);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (10, 5);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (11, 10);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (12, 10);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (13, 12);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (14, 10);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (17, 1);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (17, 16);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (18, 16);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (19, 16);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (20, 16);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (21, 16);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (22, 16);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (23, 16);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (27, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (28, 29);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (29, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (30, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (31, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (32, 29);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (33, 29);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (34, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (37, 5);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (54, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (57, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (61, 2);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (63, 1);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (64, 1);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (65, 1);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (66, 1);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (67, 65);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (68, 65);
INSERT INTO MONHOCTRUOC(MONHOC, MONHOCTRUOC) VALUES (70, 66);

CREATE TABLE SINHVIEN_MONHOC (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY, 
    SINHVIEN INT, 
    MONHOC INT
);

select * from sinhvien_monhoc

INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (1, '1412169', 1);
INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (2, '1412169', 2);
INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (3, '1412169', 3);
INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (4, '1412169', 4);
INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (5, '1412169', 5);
INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (6, '1412169', 6);
INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (7, '1412169', 7);
INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (8, '1412169', 8);
INSERT INTO SINHVIEN_MONHOC(ID, SINHVIEN, MONHOC) VALUES (9, '1412169', 9);


CREATE TABLE CHUYENNGANH_MONHOC (
	ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
	CHUYENNGANH INT, #null.môn cơ sở
    MONHOC INT, 
	HINHTHUCMONHOC INT # 1. chuyên ngành, 2.tự chọn
);

#môn cơ sở ngành hinhthucmonhoc = 1 -> batbuoc, 2 -> tuchon
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (1, null, 1, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (2, null, 2, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (3, null, 3, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (4, null, 4, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (5, null, 5, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (6, null, 6, 1);

#mạng máy tính
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (7, 4, 7, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (8, 4, 8, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (9, 4, 9, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (10, 4, 10, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (11, 4, 11, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (12, 4, 12, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (13, 4, 13, 2);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (14, 4, 14, 2);

#công nghệ phần mềm
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (15, 1, 15, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (16, 1, 16, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (17, 1, 17, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (18, 1, 18, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (19, 1, 19, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (20, 1, 20, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (21, 1, 21, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (22, 1, 22, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (23, 1, 23, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (24, 1, 24, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (25, 1, 25, 2);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (26, 1, 26, 2);

#thị giác máy tính
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (27, 3, 27, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (28, 3, 28, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (29, 3, 29, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (30, 3, 30, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (31, 3, 31, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (32, 3, 32, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (33, 3, 33, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (34, 5, 49, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (35, 5, 50, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (36, 5, 51, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (37, 5, 52, 1);

#khoa học máy tính
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (38, 5, 27, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (39, 5, 28, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (40, 5, 29, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (41, 5, 30, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (42, 5, 31, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (43, 5, 32, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (44, 5, 33, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (45, 5, 34, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (46, 5, 35, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (47, 5, 36, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (48, 5, 37, 2);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (49, 5, 38, 2);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (70, 5, 37, 2);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (71, 5, 35, 2);

#công nghệ tri thức
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (50, 6, 53, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (51, 6, 54, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (52, 6, 55, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (53, 6, 56, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (54, 6, 57, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (55, 6, 58, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (56, 6, 59, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (57, 6, 60, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (58, 6, 61, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (59, 6, 62, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (68, 6, 37, 2);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (69, 6, 35, 2);

#hệ thống thông tin
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (60, 2, 63, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (61, 2, 64, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (62, 2, 65, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (63, 2, 66, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (64, 2, 67, 1);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (65, 2, 68, 2);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (66, 2, 69, 2);
INSERT INTO CHUYENNGANH_MONHOC (ID, CHUYENNGANH, MONHOC, HINHTHUCMONHOC) VALUES (67, 2, 70, 2);

#ok = 1-> thành công, 0-> thất bại, 2->đăng ký rồi
DROP PROCEDURE dangKiMonHoc 

DELIMITER $$
CREATE PROCEDURE dangKiMonHoc(IN mssv NVARCHAR(255), IN tenmonhoc NVARCHAR(255), OUT ok INT, OUT kq NVARCHAR(255))
BEGIN
	
    SET ok = 1;
	SET kq = 'Tôi đã giúp bạn đăng kí môn học thành công!';
	if ((select count(*) from monhoc as mh where mh.tenmonhoc like tenmonhoc) != 1) then
    begin
		SET ok = 0;
		SET kq = 'Bạn vui lòng kiểm tra lại tên môn học. Tôi cần chính xác tên môn học để giúp bạn đăng kí môn học.';
    end;
    end if;
	
	if exists (select * from sinhvien_monhoc where sinhvien = mssv and monhoc = (select mh.id from monhoc as mh where mh.tenmonhoc like tenmonhoc)) then
    begin
		SET ok = 2;
		SET kq = 'Sau khi kiểm tra, hệ thống cho biết bạn đã đăng kí môn học này rồi! Nếu có nhầm lẫn nào đó, bạn nên liên hệ với phòng đào tạo để kiểm tra thông tin lại nhé!';
	end;
    else 
    begin
		insert into sinhvien_monhoc(sinhvien, monhoc) select mssv, mh.id from monhoc as mh where mh.tenmonhoc like tenmonhoc;
    end ;
    end if;
    
END; $$
DELIMITER ;

CALL dangKiMonHoc(1512112,'Cơ sở dữ liệu nâng cao', @ok, @result)
